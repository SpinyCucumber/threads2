(()=>{var t={192:(t,e,r)=>{"use strict";r.d(e,{Z:()=>u});var n=r(81),i=r.n(n),o=r(645),s=r.n(o)()(i());s.push([t.id,"html,body{height:100%;margin:0;overflow-y:hidden}body{background-color:#000}.full-height{height:100%}.vbox{display:flex;flex-direction:column}.vbox.align-center{align-items:center}.vbox.justify-center{justify-content:center}.vbox.grow{flex-grow:1}",""]);const u=s},645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r="",n=void 0!==e[5];return e[4]&&(r+="@supports (".concat(e[4],") {")),e[2]&&(r+="@media ".concat(e[2]," {")),n&&(r+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),r+=t(e),n&&(r+="}"),e[2]&&(r+="}"),e[4]&&(r+="}"),r})).join("")},e.i=function(t,r,n,i,o){"string"==typeof t&&(t=[[null,t,void 0]]);var s={};if(n)for(var u=0;u<this.length;u++){var a=this[u][0];null!=a&&(s[a]=!0)}for(var c=0;c<t.length;c++){var h=[].concat(t[c]);n&&s[h[0]]||(void 0!==o&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=o),r&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=r):h[2]=r),i&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=i):h[4]="".concat(i)),e.push(h))}},e}},81:t=>{"use strict";t.exports=function(t){return t[1]}},307:t=>{t.exports=function t(e,r,n){function i(s,u){if(!r[s]){if(!e[s]){if(o)return o(s,!0);var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}var c=r[s]={exports:{}};e[s][0].call(c.exports,(function(t){return i(e[s][1][t]||t)}),c,c.exports,t,e,r,n)}return r[s].exports}for(var o=void 0,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,r){var n,i,o,s,u,a={}.hasOwnProperty;n=t("./PriorityQueue/AbstractPriorityQueue"),i=t("./PriorityQueue/ArrayStrategy"),s=t("./PriorityQueue/BinaryHeapStrategy"),o=t("./PriorityQueue/BHeapStrategy"),(u=function(t){function e(t){t||(t={}),t.strategy||(t.strategy=s),t.comparator||(t.comparator=function(t,e){return(t||0)-(e||0)}),e.__super__.constructor.call(this,t)}return function(t,e){for(var r in e)a.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(e,t),e}(n)).ArrayStrategy=i,u.BinaryHeapStrategy=s,u.BHeapStrategy=o,e.exports=u},{"./PriorityQueue/AbstractPriorityQueue":2,"./PriorityQueue/ArrayStrategy":3,"./PriorityQueue/BHeapStrategy":4,"./PriorityQueue/BinaryHeapStrategy":5}],2:[function(t,e,r){e.exports=function(){function t(t){var e;if(null==(null!=t?t.strategy:void 0))throw"Must pass options.strategy, a strategy";if(null==(null!=t?t.comparator:void 0))throw"Must pass options.comparator, a comparator";this.priv=new t.strategy(t),this.length=(null!=t&&null!=(e=t.initialValues)?e.length:void 0)||0}return t.prototype.queue=function(t){this.length++,this.priv.queue(t)},t.prototype.dequeue=function(t){if(!this.length)throw"Empty queue";return this.length--,this.priv.dequeue()},t.prototype.peek=function(t){if(!this.length)throw"Empty queue";return this.priv.peek()},t.prototype.clear=function(){return this.length=0,this.priv.clear()},t}()},{}],3:[function(t,e,r){var n;n=function(t,e,r){var n,i,o;for(i=0,n=t.length;i<n;)r(t[o=i+n>>>1],e)>=0?i=o+1:n=o;return i},e.exports=function(){function t(t){var e;this.options=t,this.comparator=this.options.comparator,this.data=(null!=(e=this.options.initialValues)?e.slice(0):void 0)||[],this.data.sort(this.comparator).reverse()}return t.prototype.queue=function(t){var e;e=n(this.data,t,this.comparator),this.data.splice(e,0,t)},t.prototype.dequeue=function(){return this.data.pop()},t.prototype.peek=function(){return this.data[this.data.length-1]},t.prototype.clear=function(){this.data.length=0},t}()},{}],4:[function(t,e,r){e.exports=function(){function t(t){var e,r,n,i,o,s,u,a;for(this.comparator=(null!=t?t.comparator:void 0)||function(t,e){return t-e},this.pageSize=(null!=t?t.pageSize:void 0)||512,this.length=0,u=0;1<<u<this.pageSize;)u+=1;if(1<<u!==this.pageSize)throw"pageSize must be a power of two";for(this._shift=u,this._emptyMemoryPageTemplate=e=[],r=0,o=this.pageSize;0<=o?r<o:r>o;0<=o?++r:--r)e.push(null);if(this._memory=[],this._mask=this.pageSize-1,t.initialValues)for(n=0,i=(s=t.initialValues).length;n<i;n++)a=s[n],this.queue(a)}return t.prototype.queue=function(t){this.length+=1,this._write(this.length,t),this._bubbleUp(this.length,t)},t.prototype.dequeue=function(){var t,e;return t=this._read(1),e=this._read(this.length),this.length-=1,this.length>0&&(this._write(1,e),this._bubbleDown(1,e)),t},t.prototype.peek=function(){return this._read(1)},t.prototype.clear=function(){this.length=0,this._memory.length=0},t.prototype._write=function(t,e){var r;for(r=t>>this._shift;r>=this._memory.length;)this._memory.push(this._emptyMemoryPageTemplate.slice(0));return this._memory[r][t&this._mask]=e},t.prototype._read=function(t){return this._memory[t>>this._shift][t&this._mask]},t.prototype._bubbleUp=function(t,e){var r,n,i,o;for(r=this.comparator;t>1&&(n=t&this._mask,t<this.pageSize||n>3?i=t&~this._mask|n>>1:n<2?(i=t-this.pageSize>>this._shift,i+=i&~(this._mask>>1),i|=this.pageSize>>1):i=t-2,!(r(o=this._read(i),e)<0));)this._write(i,e),this._write(t,o),t=i},t.prototype._bubbleDown=function(t,e){var r,n,i,o,s;for(s=this.comparator;t<this.length;)if(t>this._mask&&!(t&this._mask-1)?r=n=t+2:t&this.pageSize>>1?(r=(t&~this._mask)>>1,n=1+(r=1+(r|=t&this._mask>>1)<<this._shift)):n=(r=t+(t&this._mask))+1,r!==n&&n<=this.length)if(i=this._read(r),o=this._read(n),s(i,e)<0&&s(i,o)<=0)this._write(r,e),this._write(t,i),t=r;else{if(!(s(o,e)<0))break;this._write(n,e),this._write(t,o),t=n}else{if(!(r<=this.length))break;if(!(s(i=this._read(r),e)<0))break;this._write(r,e),this._write(t,i),t=r}},t}()},{}],5:[function(t,e,r){e.exports=function(){function t(t){var e;this.comparator=(null!=t?t.comparator:void 0)||function(t,e){return t-e},this.length=0,this.data=(null!=(e=t.initialValues)?e.slice(0):void 0)||[],this._heapify()}return t.prototype._heapify=function(){var t,e,r;if(this.data.length>0)for(t=e=1,r=this.data.length;1<=r?e<r:e>r;t=1<=r?++e:--e)this._bubbleUp(t)},t.prototype.queue=function(t){this.data.push(t),this._bubbleUp(this.data.length-1)},t.prototype.dequeue=function(){var t,e;return e=this.data[0],t=this.data.pop(),this.data.length>0&&(this.data[0]=t,this._bubbleDown(0)),e},t.prototype.peek=function(){return this.data[0]},t.prototype.clear=function(){this.length=0,this.data.length=0},t.prototype._bubbleUp=function(t){for(var e,r;t>0&&(e=t-1>>>1,this.comparator(this.data[t],this.data[e])<0);)r=this.data[e],this.data[e]=this.data[t],this.data[t]=r,t=e},t.prototype._bubbleDown=function(t){var e,r,n,i,o;for(e=this.data.length-1;i=1+(r=1+(t<<1)),n=t,r<=e&&this.comparator(this.data[r],this.data[n])<0&&(n=r),i<=e&&this.comparator(this.data[i],this.data[n])<0&&(n=i),n!==t;)o=this.data[n],this.data[n]=this.data[t],this.data[t]=o,t=n},t}()},{}]},{},[1])(1)},379:t=>{"use strict";var e=[];function r(t){for(var r=-1,n=0;n<e.length;n++)if(e[n].identifier===t){r=n;break}return r}function n(t,n){for(var o={},s=[],u=0;u<t.length;u++){var a=t[u],c=n.base?a[0]+n.base:a[0],h=o[c]||0,f="".concat(c," ").concat(h);o[c]=h+1;var p=r(f),l={css:a[1],media:a[2],sourceMap:a[3],supports:a[4],layer:a[5]};if(-1!==p)e[p].references++,e[p].updater(l);else{var _=i(l,n);n.byIndex=u,e.splice(u,0,{identifier:f,updater:_,references:1})}s.push(f)}return s}function i(t,e){var r=e.domAPI(e);return r.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;r.update(t=e)}else r.remove()}}t.exports=function(t,i){var o=n(t=t||[],i=i||{});return function(t){t=t||[];for(var s=0;s<o.length;s++){var u=r(o[s]);e[u].references--}for(var a=n(t,i),c=0;c<o.length;c++){var h=r(o[c]);0===e[h].references&&(e[h].updater(),e.splice(h,1))}o=a}}},569:t=>{"use strict";var e={};t.exports=function(t,r){var n=function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}e[t]=r}return e[t]}(t);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(r)}},216:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,r)=>{"use strict";t.exports=function(t){var e=r.nc;e&&t.setAttribute("nonce",e)}},795:t=>{"use strict";t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(r){!function(t,e,r){var n="";r.supports&&(n+="@supports (".concat(r.supports,") {")),r.media&&(n+="@media ".concat(r.media," {"));var i=void 0!==r.layer;i&&(n+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),n+=r.css,i&&(n+="}"),r.media&&(n+="}"),r.supports&&(n+="}");var o=r.sourceMap;o&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(n,t,e.options)}(e,t,r)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},97:t=>{t.exports="#version 300 es\nprecision mediump float;\n\nout vec4 fColor;\n\nvoid\nmain()\n{\n    fColor = vec4(1.0, 1.0, 1.0, 1.0);\n}"},0:t=>{t.exports="#version 300 es\n  \nuniform vec2 uTranslate;\nin vec4 aPosition;\n\nvoid\nmain()\n{\n    gl_Position = aPosition + vec4(uTranslate, 0, 0);\n}"}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={id:n,exports:{}};return t[n](o,o.exports,r),o.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.nc=void 0,(()=>{"use strict";var t=32,e=31,n={};function i(t){t&&(t.value=!0)}function o(){}function s(t){return void 0===t.size&&(t.size=t.__iterate(a)),t.size}function u(t,e){if("number"!=typeof e){var r=e>>>0;if(""+r!==e||4294967295===r)return NaN;e=r}return e<0?s(t)+e:e}function a(){return!0}function c(t,e,r){return(0===t&&!l(t)||void 0!==r&&t<=-r)&&(void 0===e||void 0!==r&&e>=r)}function h(t,e){return p(t,e,0)}function f(t,e){return p(t,e,e)}function p(t,e,r){return void 0===t?r:l(t)?e===1/0?e:0|Math.max(0,e+t):void 0===e||e===t?t:0|Math.min(e,t)}function l(t){return t<0||0===t&&1/t==-1/0}var _="@@__IMMUTABLE_ITERABLE__@@";function v(t){return Boolean(t&&t[_])}var y="@@__IMMUTABLE_KEYED__@@";function d(t){return Boolean(t&&t[y])}var g="@@__IMMUTABLE_INDEXED__@@";function w(t){return Boolean(t&&t[g])}function m(t){return d(t)||w(t)}var b=function(t){return v(t)?t:N(t)},S=function(t){function e(t){return d(t)?t:H(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(b),z=function(t){function e(t){return w(t)?t:V(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(b),I=function(t){function e(t){return v(t)&&!m(t)?t:F(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(b);b.Keyed=S,b.Indexed=z,b.Set=I;var q="@@__IMMUTABLE_SEQ__@@";function O(t){return Boolean(t&&t[q])}var x="@@__IMMUTABLE_RECORD__@@";function M(t){return Boolean(t&&t[x])}function E(t){return v(t)||M(t)}var A="@@__IMMUTABLE_ORDERED__@@";function k(t){return Boolean(t&&t[A])}var j="function"==typeof Symbol&&Symbol.iterator,D=j||"@@iterator",T=function(t){this.next=t};function C(t,e,r,n){var i=0===t?e:1===t?r:[e,r];return n?n.value=i:n={value:i,done:!1},n}function R(){return{value:void 0,done:!0}}function L(t){return!!Array.isArray(t)||!!U(t)}function P(t){return t&&"function"==typeof t.next}function B(t){var e=U(t);return e&&e.call(t)}function U(t){var e=t&&(j&&t[j]||t["@@iterator"]);if("function"==typeof e)return e}T.prototype.toString=function(){return"[Iterator]"},T.KEYS=0,T.VALUES=1,T.ENTRIES=2,T.prototype.inspect=T.prototype.toSource=function(){return this.toString()},T.prototype[D]=function(){return this};var W=Object.prototype.hasOwnProperty;function K(t){return!(!Array.isArray(t)&&"string"!=typeof t)||t&&"object"==typeof t&&Number.isInteger(t.length)&&t.length>=0&&(0===t.length?1===Object.keys(t).length:t.hasOwnProperty(t.length-1))}var N=function(t){function e(t){return null==t?$():E(t)?t.toSeq():function(t){var e,r,n=tt(t);if(n)return(r=U(e=t))&&r===e.entries?n.fromEntrySeq():function(t){var e=U(t);return e&&e===t.keys}(t)?n.toSetSeq():n;if("object"==typeof t)return new J(t);throw new TypeError("Expected Array or collection object of values, or keyed object: "+t)}(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq {","}")},e.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},e.prototype.__iterate=function(t,e){var r=this._cache;if(r){for(var n=r.length,i=0;i!==n;){var o=r[e?n-++i:i++];if(!1===t(o[1],o[0],this))break}return i}return this.__iterateUncached(t,e)},e.prototype.__iterator=function(t,e){var r=this._cache;if(r){var n=r.length,i=0;return new T((function(){if(i===n)return{value:void 0,done:!0};var o=r[e?n-++i:i++];return C(t,o[0],o[1])}))}return this.__iteratorUncached(t,e)},e}(b),H=function(t){function e(t){return null==t?$().toKeyedSeq():v(t)?d(t)?t.toSeq():t.fromEntrySeq():M(t)?t.toSeq():X(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toKeyedSeq=function(){return this},e}(N),V=function(t){function e(t){return null==t?$():v(t)?d(t)?t.entrySeq():t.toIndexedSeq():M(t)?t.toSeq().entrySeq():G(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toIndexedSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq [","]")},e}(N),F=function(t){function e(t){return(v(t)&&!m(t)?t:V(t)).toSetSeq()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toSetSeq=function(){return this},e}(N);N.isSeq=O,N.Keyed=H,N.Set=F,N.Indexed=V,N.prototype[q]=!0;var Q=function(t){function e(t){this._array=t,this.size=t.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return this.has(t)?this._array[u(this,t)]:e},e.prototype.__iterate=function(t,e){for(var r=this._array,n=r.length,i=0;i!==n;){var o=e?n-++i:i++;if(!1===t(r[o],o,this))break}return i},e.prototype.__iterator=function(t,e){var r=this._array,n=r.length,i=0;return new T((function(){if(i===n)return{value:void 0,done:!0};var o=e?n-++i:i++;return C(t,o,r[o])}))},e}(V),J=function(t){function e(t){var e=Object.keys(t).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[]);this._object=t,this._keys=e,this.size=e.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},e.prototype.has=function(t){return W.call(this._object,t)},e.prototype.__iterate=function(t,e){for(var r=this._object,n=this._keys,i=n.length,o=0;o!==i;){var s=n[e?i-++o:o++];if(!1===t(r[s],s,this))break}return o},e.prototype.__iterator=function(t,e){var r=this._object,n=this._keys,i=n.length,o=0;return new T((function(){if(o===i)return{value:void 0,done:!0};var s=n[e?i-++o:o++];return C(t,s,r[s])}))},e}(H);J.prototype[A]=!0;var Y,Z=function(t){function e(t){this._collection=t,this.size=t.length||t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var r=B(this._collection),n=0;if(P(r))for(var i;!(i=r.next()).done&&!1!==t(i.value,n++,this););return n},e.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var r=B(this._collection);if(!P(r))return new T(R);var n=0;return new T((function(){var e=r.next();return e.done?e:C(t,n++,e.value)}))},e}(V);function $(){return Y||(Y=new Q([]))}function X(t){var e=tt(t);if(e)return e.fromEntrySeq();if("object"==typeof t)return new J(t);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+t)}function G(t){var e=tt(t);if(e)return e;throw new TypeError("Expected Array or collection object of values: "+t)}function tt(t){return K(t)?new Q(t):L(t)?new Z(t):void 0}var et="@@__IMMUTABLE_MAP__@@";function rt(t){return Boolean(t&&t[et])}function nt(t){return rt(t)&&k(t)}function it(t){return Boolean(t&&"function"==typeof t.equals&&"function"==typeof t.hashCode)}function ot(t,e){if(t===e||t!=t&&e!=e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if((t=t.valueOf())===(e=e.valueOf())||t!=t&&e!=e)return!0;if(!t||!e)return!1}return!!(it(t)&&it(e)&&t.equals(e))}var st="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){var r=65535&(t|=0),n=65535&(e|=0);return r*n+((t>>>16)*n+r*(e>>>16)<<16>>>0)|0};function ut(t){return t>>>1&1073741824|3221225471&t}var at=Object.prototype.valueOf;function ct(t){if(null==t)return ht(t);if("function"==typeof t.hashCode)return ut(t.hashCode(t));var e,r,n,i=(e=t).valueOf!==at&&"function"==typeof e.valueOf?e.valueOf(e):e;if(null==i)return ht(i);switch(typeof i){case"boolean":return i?1108378657:1108378656;case"number":return function(t){if(t!=t||t===1/0)return 0;var e=0|t;for(e!==t&&(e^=4294967295*t);t>4294967295;)e^=t/=4294967295;return ut(e)}(i);case"string":return i.length>mt?(void 0===(n=zt[r=i])&&(n=ft(r),St===bt&&(St=0,zt={}),St++,zt[r]=n),n):ft(i);case"object":case"function":return function(t){var e;if(yt&&void 0!==(e=vt.get(t)))return e;if(void 0!==(e=t[wt]))return e;if(!lt){if(void 0!==(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[wt]))return e;if(void 0!==(e=function(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}(t)))return e}if(e=_t(),yt)vt.set(t,e);else{if(void 0!==pt&&!1===pt(t))throw new Error("Non-extensible objects are not allowed as keys.");if(lt)Object.defineProperty(t,wt,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[wt]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[wt]=e}}return e}(i);case"symbol":return function(t){var e=dt[t];return void 0!==e||(e=_t(),dt[t]=e),e}(i);default:if("function"==typeof i.toString)return ft(i.toString());throw new Error("Value type "+typeof i+" cannot be hashed.")}}function ht(t){return null===t?1108378658:1108378659}function ft(t){for(var e=0,r=0;r<t.length;r++)e=31*e+t.charCodeAt(r)|0;return ut(e)}var pt=Object.isExtensible,lt=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}();function _t(){var t=++gt;return 1073741824&gt&&(gt=0),t}var vt,yt="function"==typeof WeakMap;yt&&(vt=new WeakMap);var dt=Object.create(null),gt=0,wt="__immutablehash__";"function"==typeof Symbol&&(wt=Symbol(wt));var mt=16,bt=255,St=0,zt={},It=function(t){function e(t,e){this._iter=t,this._useKeys=e,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return this._iter.get(t,e)},e.prototype.has=function(t){return this._iter.has(t)},e.prototype.valueSeq=function(){return this._iter.valueSeq()},e.prototype.reverse=function(){var t=this,e=At(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},e.prototype.map=function(t,e){var r=this,n=Et(this,t,e);return this._useKeys||(n.valueSeq=function(){return r._iter.toSeq().map(t,e)}),n},e.prototype.__iterate=function(t,e){var r=this;return this._iter.__iterate((function(e,n){return t(e,n,r)}),e)},e.prototype.__iterator=function(t,e){return this._iter.__iterator(t,e)},e}(H);It.prototype[A]=!0;var qt=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.includes=function(t){return this._iter.includes(t)},e.prototype.__iterate=function(t,e){var r=this,n=0;return e&&s(this),this._iter.__iterate((function(i){return t(i,e?r.size-++n:n++,r)}),e)},e.prototype.__iterator=function(t,e){var r=this,n=this._iter.__iterator(1,e),i=0;return e&&s(this),new T((function(){var o=n.next();return o.done?o:C(t,e?r.size-++i:i++,o.value,o)}))},e}(V),Ot=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.has=function(t){return this._iter.includes(t)},e.prototype.__iterate=function(t,e){var r=this;return this._iter.__iterate((function(e){return t(e,e,r)}),e)},e.prototype.__iterator=function(t,e){var r=this._iter.__iterator(1,e);return new T((function(){var e=r.next();return e.done?e:C(t,e.value,e.value,e)}))},e}(F),xt=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.entrySeq=function(){return this._iter.toSeq()},e.prototype.__iterate=function(t,e){var r=this;return this._iter.__iterate((function(e){if(e){Wt(e);var n=v(e);return t(n?e.get(1):e[1],n?e.get(0):e[0],r)}}),e)},e.prototype.__iterator=function(t,e){var r=this._iter.__iterator(1,e);return new T((function(){for(;;){var e=r.next();if(e.done)return e;var n=e.value;if(n){Wt(n);var i=v(n);return C(t,i?n.get(0):n[0],i?n.get(1):n[1],e)}}}))},e}(H);function Mt(t){var e=Nt(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=Ht,e.__iterateUncached=function(e,r){var n=this;return t.__iterate((function(t,r){return!1!==e(r,t,n)}),r)},e.__iteratorUncached=function(e,r){if(2===e){var n=t.__iterator(e,r);return new T((function(){var t=n.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t}))}return t.__iterator(1===e?0:1,r)},e}function Et(t,e,r){var i=Nt(t);return i.size=t.size,i.has=function(e){return t.has(e)},i.get=function(i,o){var s=t.get(i,n);return s===n?o:e.call(r,s,i,t)},i.__iterateUncached=function(n,i){var o=this;return t.__iterate((function(t,i,s){return!1!==n(e.call(r,t,i,s),i,o)}),i)},i.__iteratorUncached=function(n,i){var o=t.__iterator(2,i);return new T((function(){var i=o.next();if(i.done)return i;var s=i.value,u=s[0];return C(n,u,e.call(r,s[1],u,t),i)}))},i}function At(t,e){var r=this,n=Nt(t);return n._iter=t,n.size=t.size,n.reverse=function(){return t},t.flip&&(n.flip=function(){var e=Mt(t);return e.reverse=function(){return t.flip()},e}),n.get=function(r,n){return t.get(e?r:-1-r,n)},n.has=function(r){return t.has(e?r:-1-r)},n.includes=function(e){return t.includes(e)},n.cacheResult=Ht,n.__iterate=function(r,n){var i=this,o=0;return n&&s(t),t.__iterate((function(t,s){return r(t,e?s:n?i.size-++o:o++,i)}),!n)},n.__iterator=function(n,i){var o=0;i&&s(t);var u=t.__iterator(2,!i);return new T((function(){var t=u.next();if(t.done)return t;var s=t.value;return C(n,e?s[0]:i?r.size-++o:o++,s[1],t)}))},n}function kt(t,e,r,i){var o=Nt(t);return i&&(o.has=function(i){var o=t.get(i,n);return o!==n&&!!e.call(r,o,i,t)},o.get=function(i,o){var s=t.get(i,n);return s!==n&&e.call(r,s,i,t)?s:o}),o.__iterateUncached=function(n,o){var s=this,u=0;return t.__iterate((function(t,o,a){if(e.call(r,t,o,a))return u++,n(t,i?o:u-1,s)}),o),u},o.__iteratorUncached=function(n,o){var s=t.__iterator(2,o),u=0;return new T((function(){for(;;){var o=s.next();if(o.done)return o;var a=o.value,c=a[0],h=a[1];if(e.call(r,h,c,t))return C(n,i?c:u++,h,o)}}))},o}function jt(t,e,r,n){var i=t.size;if(c(e,r,i))return t;var o=h(e,i),s=f(r,i);if(o!=o||s!=s)return jt(t.toSeq().cacheResult(),e,r,n);var a,p=s-o;p==p&&(a=p<0?0:p);var l=Nt(t);return l.size=0===a?a:t.size&&a||void 0,!n&&O(t)&&a>=0&&(l.get=function(e,r){return(e=u(this,e))>=0&&e<a?t.get(e+o,r):r}),l.__iterateUncached=function(e,r){var i=this;if(0===a)return 0;if(r)return this.cacheResult().__iterate(e,r);var s=0,u=!0,c=0;return t.__iterate((function(t,r){if(!u||!(u=s++<o))return c++,!1!==e(t,n?r:c-1,i)&&c!==a})),c},l.__iteratorUncached=function(e,r){if(0!==a&&r)return this.cacheResult().__iterator(e,r);if(0===a)return new T(R);var i=t.__iterator(e,r),s=0,u=0;return new T((function(){for(;s++<o;)i.next();if(++u>a)return{value:void 0,done:!0};var t=i.next();return n||1===e||t.done?t:C(e,u-1,0===e?void 0:t.value[1],t)}))},l}function Dt(t,e,r,n){var i=Nt(t);return i.__iterateUncached=function(i,o){var s=this;if(o)return this.cacheResult().__iterate(i,o);var u=!0,a=0;return t.__iterate((function(t,o,c){if(!u||!(u=e.call(r,t,o,c)))return a++,i(t,n?o:a-1,s)})),a},i.__iteratorUncached=function(i,o){var s=this;if(o)return this.cacheResult().__iterator(i,o);var u=t.__iterator(2,o),a=!0,c=0;return new T((function(){var t,o,h;do{if((t=u.next()).done)return n||1===i?t:C(i,c++,0===i?void 0:t.value[1],t);var f=t.value;o=f[0],h=f[1],a&&(a=e.call(r,h,o,s))}while(a);return 2===i?t:C(i,o,h,t)}))},i}function Tt(t,e){var r=d(t),n=[t].concat(e).map((function(t){return v(t)?r&&(t=S(t)):t=r?X(t):G(Array.isArray(t)?t:[t]),t})).filter((function(t){return 0!==t.size}));if(0===n.length)return t;if(1===n.length){var i=n[0];if(i===t||r&&d(i)||w(t)&&w(i))return i}var o=new Q(n);return r?o=o.toKeyedSeq():w(t)||(o=o.toSetSeq()),(o=o.flatten(!0)).size=n.reduce((function(t,e){if(void 0!==t){var r=e.size;if(void 0!==r)return t+r}}),0),o}function Ct(t,e,r){var n=Nt(t);return n.__iterateUncached=function(i,o){if(o)return this.cacheResult().__iterate(i,o);var s=0,u=!1;return function t(a,c){a.__iterate((function(o,a){return(!e||c<e)&&v(o)?t(o,c+1):(s++,!1===i(o,r?a:s-1,n)&&(u=!0)),!u}),o)}(t,0),s},n.__iteratorUncached=function(n,i){if(i)return this.cacheResult().__iterator(n,i);var o=t.__iterator(n,i),s=[],u=0;return new T((function(){for(;o;){var t=o.next();if(!1===t.done){var a=t.value;if(2===n&&(a=a[1]),e&&!(s.length<e)||!v(a))return r?t:C(n,u++,a,t);s.push(o),o=a.__iterator(n,i)}else o=s.pop()}return{value:void 0,done:!0}}))},n}function Rt(t,e,r){e||(e=Vt);var n=d(t),i=0,o=t.toSeq().map((function(e,n){return[n,e,i++,r?r(e,n,t):e]})).valueSeq().toArray();return o.sort((function(t,r){return e(t[3],r[3])||t[2]-r[2]})).forEach(n?function(t,e){o[e].length=2}:function(t,e){o[e]=t[1]}),n?H(o):w(t)?V(o):F(o)}function Lt(t,e,r){if(e||(e=Vt),r){var n=t.toSeq().map((function(e,n){return[e,r(e,n,t)]})).reduce((function(t,r){return Pt(e,t[1],r[1])?r:t}));return n&&n[0]}return t.reduce((function(t,r){return Pt(e,t,r)?r:t}))}function Pt(t,e,r){var n=t(r,e);return 0===n&&r!==e&&(null==r||r!=r)||n>0}function Bt(t,e,r,n){var i=Nt(t),o=new Q(r).map((function(t){return t.size}));return i.size=n?o.max():o.min(),i.__iterate=function(t,e){for(var r,n=this.__iterator(1,e),i=0;!(r=n.next()).done&&!1!==t(r.value,i++,this););return i},i.__iteratorUncached=function(t,i){var o=r.map((function(t){return t=b(t),B(i?t.reverse():t)})),s=0,u=!1;return new T((function(){var r;return u||(r=o.map((function(t){return t.next()})),u=n?r.every((function(t){return t.done})):r.some((function(t){return t.done}))),u?{value:void 0,done:!0}:C(t,s++,e.apply(null,r.map((function(t){return t.value}))))}))},i}function Ut(t,e){return t===e?t:O(t)?e:t.constructor(e)}function Wt(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Kt(t){return d(t)?S:w(t)?z:I}function Nt(t){return Object.create((d(t)?H:w(t)?V:F).prototype)}function Ht(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):N.prototype.cacheResult.call(this)}function Vt(t,e){return void 0===t&&void 0===e?0:void 0===t?1:void 0===e?-1:t>e?1:t<e?-1:0}function Ft(t,e){e=e||0;for(var r=Math.max(0,t.length-e),n=new Array(r),i=0;i<r;i++)n[i]=t[i+e];return n}function Qt(t,e){if(!t)throw new Error(e)}function Jt(t){Qt(t!==1/0,"Cannot perform this action with an infinite size.")}function Yt(t){if(K(t)&&"string"!=typeof t)return t;if(k(t))return t.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+t)}qt.prototype.cacheResult=It.prototype.cacheResult=Ot.prototype.cacheResult=xt.prototype.cacheResult=Ht;var Zt=Object.prototype.toString;function $t(t){if(!t||"object"!=typeof t||"[object Object]"!==Zt.call(t))return!1;var e=Object.getPrototypeOf(t);if(null===e)return!0;for(var r=e,n=Object.getPrototypeOf(e);null!==n;)r=n,n=Object.getPrototypeOf(r);return r===e}function Xt(t){return"object"==typeof t&&(E(t)||Array.isArray(t)||$t(t))}function Gt(t){try{return"string"==typeof t?JSON.stringify(t):String(t)}catch(e){return JSON.stringify(t)}}function te(t,e){return E(t)?t.has(e):Xt(t)&&W.call(t,e)}function ee(t,e,r){return E(t)?t.get(e,r):te(t,e)?"function"==typeof t.get?t.get(e):t[e]:r}function re(t){if(Array.isArray(t))return Ft(t);var e={};for(var r in t)W.call(t,r)&&(e[r]=t[r]);return e}function ne(t,e){if(!Xt(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(E(t)){if(!t.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+t);return t.remove(e)}if(!W.call(t,e))return t;var r=re(t);return Array.isArray(r)?r.splice(e,1):delete r[e],r}function ie(t,e,r){if(!Xt(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(E(t)){if(!t.set)throw new TypeError("Cannot update immutable value without .set() method: "+t);return t.set(e,r)}if(W.call(t,e)&&r===t[e])return t;var n=re(t);return n[e]=r,n}function oe(t,e,r,i){i||(i=r,r=void 0);var o=se(E(t),t,Yt(e),0,r,i);return o===n?r:o}function se(t,e,r,i,o,s){var u=e===n;if(i===r.length){var a=u?o:e,c=s(a);return c===a?e:c}if(!u&&!Xt(e))throw new TypeError("Cannot update within non-data-structure value in path ["+r.slice(0,i).map(Gt)+"]: "+e);var h=r[i],f=u?n:ee(e,h,n),p=se(f===n?t:E(f),f,r,i+1,o,s);return p===f?e:p===n?ne(e,h):ie(u?t?Be():{}:e,h,p)}function ue(t,e,r){return oe(t,e,n,(function(){return r}))}function ae(t,e){return ue(this,t,e)}function ce(t,e){return oe(t,e,(function(){return n}))}function he(t){return ce(this,t)}function fe(t,e,r,n){return oe(t,[e],r,n)}function pe(t,e,r){return 1===arguments.length?t(this):fe(this,t,e,r)}function le(t,e,r){return oe(this,t,e,r)}function _e(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return ye(this,t)}function ve(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];if("function"!=typeof t)throw new TypeError("Invalid merger function: "+t);return ye(this,e,t)}function ye(t,e,r){for(var i=[],o=0;o<e.length;o++){var s=S(e[o]);0!==s.size&&i.push(s)}return 0===i.length?t:0!==t.toSeq().size||t.__ownerID||1!==i.length?t.withMutations((function(t){for(var e=r?function(e,i){fe(t,i,n,(function(t){return t===n?e:r(t,e,i)}))}:function(e,r){t.set(r,e)},o=0;o<i.length;o++)i[o].forEach(e)})):t.constructor(i[0])}function de(t,e,r){return ge(t,e,function(t){return function e(r,n,i){return Xt(r)&&Xt(n)&&(o=n,s=N(r),u=N(o),w(s)===w(u)&&d(s)===d(u))?ge(r,[n],e):t?t(r,n,i):n;var o,s,u}}(r))}function ge(t,e,r){if(!Xt(t))throw new TypeError("Cannot merge into non-data-structure value: "+t);if(E(t))return"function"==typeof r&&t.mergeWith?t.mergeWith.apply(t,[r].concat(e)):t.merge?t.merge.apply(t,e):t.concat.apply(t,e);for(var n=Array.isArray(t),i=t,o=n?z:S,s=n?function(e){i===t&&(i=re(i)),i.push(e)}:function(e,n){var o=W.call(i,n),s=o&&r?r(i[n],e,n):e;o&&s===i[n]||(i===t&&(i=re(i)),i[n]=s)},u=0;u<e.length;u++)o(e[u]).forEach(s);return i}function we(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return de(this,t)}function me(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return de(this,e,t)}function be(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return oe(this,t,Be(),(function(t){return ge(t,e)}))}function Se(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return oe(this,t,Be(),(function(t){return de(t,e)}))}function ze(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this}function Ie(){return this.__ownerID?this:this.__ensureOwner(new o)}function qe(){return this.__ensureOwner()}function Oe(){return this.__altered}var xe=function(t){function e(e){return null==e?Be():rt(e)&&!k(e)?e:Be().withMutations((function(r){var n=t(e);Jt(n.size),n.forEach((function(t,e){return r.set(e,t)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Be().withMutations((function(e){for(var r=0;r<t.length;r+=2){if(r+1>=t.length)throw new Error("Missing value for key: "+t[r]);e.set(t[r],t[r+1])}}))},e.prototype.toString=function(){return this.__toString("Map {","}")},e.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},e.prototype.set=function(t,e){return Ue(this,t,e)},e.prototype.remove=function(t){return Ue(this,t,n)},e.prototype.deleteAll=function(t){var e=b(t);return 0===e.size?this:this.withMutations((function(t){e.forEach((function(e){return t.remove(e)}))}))},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Be()},e.prototype.sort=function(t){return fr(Rt(this,t))},e.prototype.sortBy=function(t,e){return fr(Rt(this,e,t))},e.prototype.map=function(t,e){var r=this;return this.withMutations((function(n){n.forEach((function(i,o){n.set(o,t.call(e,i,o,r))}))}))},e.prototype.__iterator=function(t,e){return new Ce(this,t,e)},e.prototype.__iterate=function(t,e){var r=this,n=0;return this._root&&this._root.iterate((function(e){return n++,t(e[1],e[0],r)}),e),n},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Pe(this.size,this._root,t,this.__hash):0===this.size?Be():(this.__ownerID=t,this.__altered=!1,this)},e}(S);xe.isMap=rt;var Me=xe.prototype;Me[et]=!0,Me.delete=Me.remove,Me.removeAll=Me.deleteAll,Me.setIn=ae,Me.removeIn=Me.deleteIn=he,Me.update=pe,Me.updateIn=le,Me.merge=Me.concat=_e,Me.mergeWith=ve,Me.mergeDeep=we,Me.mergeDeepWith=me,Me.mergeIn=be,Me.mergeDeepIn=Se,Me.withMutations=ze,Me.wasAltered=Oe,Me.asImmutable=qe,Me["@@transducer/init"]=Me.asMutable=Ie,Me["@@transducer/step"]=function(t,e){return t.set(e[0],e[1])},Me["@@transducer/result"]=function(t){return t.asImmutable()};var Ee=function(t,e){this.ownerID=t,this.entries=e};Ee.prototype.get=function(t,e,r,n){for(var i=this.entries,o=0,s=i.length;o<s;o++)if(ot(r,i[o][0]))return i[o][1];return n},Ee.prototype.update=function(t,e,r,s,u,a,c){for(var h=u===n,f=this.entries,p=0,l=f.length;p<l&&!ot(s,f[p][0]);p++);var _=p<l;if(_?f[p][1]===u:h)return this;if(i(c),(h||!_)&&i(a),!h||1!==f.length){if(!_&&!h&&f.length>=Fe)return function(t,e,r,n){t||(t=new o);for(var i=new De(t,ct(r),[r,n]),s=0;s<e.length;s++){var u=e[s];i=i.update(t,0,void 0,u[0],u[1])}return i}(t,f,s,u);var v=t&&t===this.ownerID,y=v?f:Ft(f);return _?h?p===l-1?y.pop():y[p]=y.pop():y[p]=[s,u]:y.push([s,u]),v?(this.entries=y,this):new Ee(t,y)}};var Ae=function(t,e,r){this.ownerID=t,this.bitmap=e,this.nodes=r};Ae.prototype.get=function(t,r,n,i){void 0===r&&(r=ct(n));var o=1<<((0===t?r:r>>>t)&e),s=this.bitmap;return 0==(s&o)?i:this.nodes[He(s&o-1)].get(t+5,r,n,i)},Ae.prototype.update=function(r,i,o,s,u,a,c){void 0===o&&(o=ct(s));var h=(0===i?o:o>>>i)&e,f=1<<h,p=this.bitmap,l=0!=(p&f);if(!l&&u===n)return this;var _=He(p&f-1),v=this.nodes,y=l?v[_]:void 0,d=We(y,r,i+5,o,s,u,a,c);if(d===y)return this;if(!l&&d&&v.length>=Qe)return function(e,r,n,i,o){for(var s=0,u=new Array(t),a=0;0!==n;a++,n>>>=1)u[a]=1&n?r[s++]:void 0;return u[i]=o,new ke(e,s+1,u)}(r,v,p,h,d);if(l&&!d&&2===v.length&&Ke(v[1^_]))return v[1^_];if(l&&d&&1===v.length&&Ke(d))return d;var g=r&&r===this.ownerID,w=l?d?p:p^f:p|f,m=l?d?Ve(v,_,d,g):function(t,e,r){var n=t.length-1;if(r&&e===n)return t.pop(),t;for(var i=new Array(n),o=0,s=0;s<n;s++)s===e&&(o=1),i[s]=t[s+o];return i}(v,_,g):function(t,e,r,n){var i=t.length+1;if(n&&e+1===i)return t[e]=r,t;for(var o=new Array(i),s=0,u=0;u<i;u++)u===e?(o[u]=r,s=-1):o[u]=t[u+s];return o}(v,_,d,g);return g?(this.bitmap=w,this.nodes=m,this):new Ae(r,w,m)};var ke=function(t,e,r){this.ownerID=t,this.count=e,this.nodes=r};ke.prototype.get=function(t,r,n,i){void 0===r&&(r=ct(n));var o=(0===t?r:r>>>t)&e,s=this.nodes[o];return s?s.get(t+5,r,n,i):i},ke.prototype.update=function(t,r,i,o,s,u,a){void 0===i&&(i=ct(o));var c=(0===r?i:i>>>r)&e,h=s===n,f=this.nodes,p=f[c];if(h&&!p)return this;var l=We(p,t,r+5,i,o,s,u,a);if(l===p)return this;var _=this.count;if(p){if(!l&&--_<Je)return function(t,e,r,n){for(var i=0,o=0,s=new Array(r),u=0,a=1,c=e.length;u<c;u++,a<<=1){var h=e[u];void 0!==h&&u!==n&&(i|=a,s[o++]=h)}return new Ae(t,i,s)}(t,f,_,c)}else _++;var v=t&&t===this.ownerID,y=Ve(f,c,l,v);return v?(this.count=_,this.nodes=y,this):new ke(t,_,y)};var je=function(t,e,r){this.ownerID=t,this.keyHash=e,this.entries=r};je.prototype.get=function(t,e,r,n){for(var i=this.entries,o=0,s=i.length;o<s;o++)if(ot(r,i[o][0]))return i[o][1];return n},je.prototype.update=function(t,e,r,o,s,u,a){void 0===r&&(r=ct(o));var c=s===n;if(r!==this.keyHash)return c?this:(i(a),i(u),Ne(this,t,e,r,[o,s]));for(var h=this.entries,f=0,p=h.length;f<p&&!ot(o,h[f][0]);f++);var l=f<p;if(l?h[f][1]===s:c)return this;if(i(a),(c||!l)&&i(u),c&&2===p)return new De(t,this.keyHash,h[1^f]);var _=t&&t===this.ownerID,v=_?h:Ft(h);return l?c?f===p-1?v.pop():v[f]=v.pop():v[f]=[o,s]:v.push([o,s]),_?(this.entries=v,this):new je(t,this.keyHash,v)};var De=function(t,e,r){this.ownerID=t,this.keyHash=e,this.entry=r};De.prototype.get=function(t,e,r,n){return ot(r,this.entry[0])?this.entry[1]:n},De.prototype.update=function(t,e,r,o,s,u,a){var c=s===n,h=ot(o,this.entry[0]);return(h?s===this.entry[1]:c)?this:(i(a),c?void i(u):h?t&&t===this.ownerID?(this.entry[1]=s,this):new De(t,this.keyHash,[o,s]):(i(u),Ne(this,t,e,ct(o),[o,s])))},Ee.prototype.iterate=je.prototype.iterate=function(t,e){for(var r=this.entries,n=0,i=r.length-1;n<=i;n++)if(!1===t(r[e?i-n:n]))return!1},Ae.prototype.iterate=ke.prototype.iterate=function(t,e){for(var r=this.nodes,n=0,i=r.length-1;n<=i;n++){var o=r[e?i-n:n];if(o&&!1===o.iterate(t,e))return!1}},De.prototype.iterate=function(t,e){return t(this.entry)};var Te,Ce=function(t){function e(t,e,r){this._type=e,this._reverse=r,this._stack=t._root&&Le(t._root)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var r=e.node,n=e.index++,i=void 0;if(r.entry){if(0===n)return Re(t,r.entry)}else if(r.entries){if(n<=(i=r.entries.length-1))return Re(t,r.entries[this._reverse?i-n:n])}else if(n<=(i=r.nodes.length-1)){var o=r.nodes[this._reverse?i-n:n];if(o){if(o.entry)return Re(t,o.entry);e=this._stack=Le(o,e)}continue}e=this._stack=this._stack.__prev}return{value:void 0,done:!0}},e}(T);function Re(t,e){return C(t,e[0],e[1])}function Le(t,e){return{node:t,index:0,__prev:e}}function Pe(t,e,r,n){var i=Object.create(Me);return i.size=t,i._root=e,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function Be(){return Te||(Te=Pe(0))}function Ue(t,e,r){var i,o;if(t._root){var s={value:!1},u={value:!1};if(i=We(t._root,t.__ownerID,0,void 0,e,r,s,u),!u.value)return t;o=t.size+(s.value?r===n?-1:1:0)}else{if(r===n)return t;o=1,i=new Ee(t.__ownerID,[[e,r]])}return t.__ownerID?(t.size=o,t._root=i,t.__hash=void 0,t.__altered=!0,t):i?Pe(o,i):Be()}function We(t,e,r,o,s,u,a,c){return t?t.update(e,r,o,s,u,a,c):u===n?t:(i(c),i(a),new De(e,o,[s,u]))}function Ke(t){return t.constructor===De||t.constructor===je}function Ne(t,r,n,i,o){if(t.keyHash===i)return new je(r,i,[t.entry,o]);var s,u=(0===n?t.keyHash:t.keyHash>>>n)&e,a=(0===n?i:i>>>n)&e,c=u===a?[Ne(t,r,n+5,i,o)]:(s=new De(r,i,o),u<a?[t,s]:[s,t]);return new Ae(r,1<<u|1<<a,c)}function He(t){return t=(t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135,127&(t+=t>>8)+(t>>16)}function Ve(t,e,r,n){var i=n?t:Ft(t);return i[e]=r,i}var Fe=8,Qe=16,Je=8,Ye="@@__IMMUTABLE_LIST__@@";function Ze(t){return Boolean(t&&t[Ye])}var $e=function(r){function n(e){var n=ir();if(null==e)return n;if(Ze(e))return e;var i=r(e),o=i.size;return 0===o?n:(Jt(o),o>0&&o<t?nr(0,o,5,null,new Ge(i.toArray())):n.withMutations((function(t){t.setSize(o),i.forEach((function(e,r){return t.set(r,e)}))})))}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.of=function(){return this(arguments)},n.prototype.toString=function(){return this.__toString("List [","]")},n.prototype.get=function(t,r){if((t=u(this,t))>=0&&t<this.size){var n=ur(this,t+=this._origin);return n&&n.array[t&e]}return r},n.prototype.set=function(t,e){return function(t,e,r){if((e=u(t,e))!=e)return t;if(e>=t.size||e<0)return t.withMutations((function(t){e<0?ar(t,e).set(0,r):ar(t,0,e+1).set(e,r)}));e+=t._origin;var n=t._tail,i=t._root,o={value:!1};return e>=cr(t._capacity)?n=or(n,t.__ownerID,0,e,r,o):i=or(i,t.__ownerID,t._level,e,r,o),o.value?t.__ownerID?(t._root=i,t._tail=n,t.__hash=void 0,t.__altered=!0,t):nr(t._origin,t._capacity,t._level,i,n):t}(this,t,e)},n.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},n.prototype.insert=function(t,e){return this.splice(t,0,e)},n.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=5,this._root=this._tail=this.__hash=void 0,this.__altered=!0,this):ir()},n.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations((function(r){ar(r,0,e+t.length);for(var n=0;n<t.length;n++)r.set(e+n,t[n])}))},n.prototype.pop=function(){return ar(this,0,-1)},n.prototype.unshift=function(){var t=arguments;return this.withMutations((function(e){ar(e,-t.length);for(var r=0;r<t.length;r++)e.set(r,t[r])}))},n.prototype.shift=function(){return ar(this,1)},n.prototype.concat=function(){for(var t=arguments,e=[],n=0;n<arguments.length;n++){var i=t[n],o=r("string"!=typeof i&&L(i)?i:[i]);0!==o.size&&e.push(o)}return 0===e.length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations((function(t){e.forEach((function(e){return e.forEach((function(e){return t.push(e)}))}))})):this.constructor(e[0])},n.prototype.setSize=function(t){return ar(this,0,t)},n.prototype.map=function(t,e){var r=this;return this.withMutations((function(n){for(var i=0;i<r.size;i++)n.set(i,t.call(e,n.get(i),i,r))}))},n.prototype.slice=function(t,e){var r=this.size;return c(t,e,r)?this:ar(this,h(t,r),f(e,r))},n.prototype.__iterator=function(t,e){var r=e?this.size:0,n=rr(this,e);return new T((function(){var i=n();return i===er?{value:void 0,done:!0}:C(t,e?--r:r++,i)}))},n.prototype.__iterate=function(t,e){for(var r,n=e?this.size:0,i=rr(this,e);(r=i())!==er&&!1!==t(r,e?--n:n++,this););return n},n.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?nr(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):0===this.size?ir():(this.__ownerID=t,this.__altered=!1,this)},n}(z);$e.isList=Ze;var Xe=$e.prototype;Xe[Ye]=!0,Xe.delete=Xe.remove,Xe.merge=Xe.concat,Xe.setIn=ae,Xe.deleteIn=Xe.removeIn=he,Xe.update=pe,Xe.updateIn=le,Xe.mergeIn=be,Xe.mergeDeepIn=Se,Xe.withMutations=ze,Xe.wasAltered=Oe,Xe.asImmutable=qe,Xe["@@transducer/init"]=Xe.asMutable=Ie,Xe["@@transducer/step"]=function(t,e){return t.push(e)},Xe["@@transducer/result"]=function(t){return t.asImmutable()};var Ge=function(t,e){this.array=t,this.ownerID=e};Ge.prototype.removeBefore=function(t,r,n){if(n===r?1<<r:0===this.array.length)return this;var i=n>>>r&e;if(i>=this.array.length)return new Ge([],t);var o,s=0===i;if(r>0){var u=this.array[i];if((o=u&&u.removeBefore(t,r-5,n))===u&&s)return this}if(s&&!o)return this;var a=sr(this,t);if(!s)for(var c=0;c<i;c++)a.array[c]=void 0;return o&&(a.array[i]=o),a},Ge.prototype.removeAfter=function(t,r,n){if(n===(r?1<<r:0)||0===this.array.length)return this;var i,o=n-1>>>r&e;if(o>=this.array.length)return this;if(r>0){var s=this.array[o];if((i=s&&s.removeAfter(t,r-5,n))===s&&o===this.array.length-1)return this}var u=sr(this,t);return u.array.splice(o+1),i&&(u.array[o]=i),u};var tr,er={};function rr(e,r){var n=e._origin,i=e._capacity,o=cr(i),s=e._tail;return function e(u,a,c){return 0===a?function(e,u){var a=u===o?s&&s.array:e&&e.array,c=u>n?0:n-u,h=i-u;return h>t&&(h=t),function(){if(c===h)return er;var t=r?--h:c++;return a&&a[t]}}(u,c):function(o,s,u){var a,c=o&&o.array,h=u>n?0:n-u>>s,f=1+(i-u>>s);return f>t&&(f=t),function(){for(;;){if(a){var t=a();if(t!==er)return t;a=null}if(h===f)return er;var n=r?--f:h++;a=e(c&&c[n],s-5,u+(n<<s))}}}(u,a,c)}(e._root,e._level,0)}function nr(t,e,r,n,i,o,s){var u=Object.create(Xe);return u.size=e-t,u._origin=t,u._capacity=e,u._level=r,u._root=n,u._tail=i,u.__ownerID=o,u.__hash=s,u.__altered=!1,u}function ir(){return tr||(tr=nr(0,0,5))}function or(t,r,n,o,s,u){var a,c=o>>>n&e,h=t&&c<t.array.length;if(!h&&void 0===s)return t;if(n>0){var f=t&&t.array[c],p=or(f,r,n-5,o,s,u);return p===f?t:((a=sr(t,r)).array[c]=p,a)}return h&&t.array[c]===s?t:(u&&i(u),a=sr(t,r),void 0===s&&c===a.array.length-1?a.array.pop():a.array[c]=s,a)}function sr(t,e){return e&&t&&e===t.ownerID?t:new Ge(t?t.array.slice():[],e)}function ur(t,r){if(r>=cr(t._capacity))return t._tail;if(r<1<<t._level+5){for(var n=t._root,i=t._level;n&&i>0;)n=n.array[r>>>i&e],i-=5;return n}}function ar(t,r,n){void 0!==r&&(r|=0),void 0!==n&&(n|=0);var i=t.__ownerID||new o,s=t._origin,u=t._capacity,a=s+r,c=void 0===n?u:n<0?u+n:s+n;if(a===s&&c===u)return t;if(a>=c)return t.clear();for(var h=t._level,f=t._root,p=0;a+p<0;)f=new Ge(f&&f.array.length?[void 0,f]:[],i),p+=1<<(h+=5);p&&(a+=p,s+=p,c+=p,u+=p);for(var l=cr(u),_=cr(c);_>=1<<h+5;)f=new Ge(f&&f.array.length?[f]:[],i),h+=5;var v=t._tail,y=_<l?ur(t,c-1):_>l?new Ge([],i):v;if(v&&_>l&&a<u&&v.array.length){for(var d=f=sr(f,i),g=h;g>5;g-=5){var w=l>>>g&e;d=d.array[w]=sr(d.array[w],i)}d.array[l>>>5&e]=v}if(c<u&&(y=y&&y.removeAfter(i,0,c)),a>=_)a-=_,c-=_,h=5,f=null,y=y&&y.removeBefore(i,0,a);else if(a>s||_<l){for(p=0;f;){var m=a>>>h&e;if(m!==_>>>h&e)break;m&&(p+=(1<<h)*m),h-=5,f=f.array[m]}f&&a>s&&(f=f.removeBefore(i,h,a-p)),f&&_<l&&(f=f.removeAfter(i,h,_-p)),p&&(a-=p,c-=p)}return t.__ownerID?(t.size=c-a,t._origin=a,t._capacity=c,t._level=h,t._root=f,t._tail=y,t.__hash=void 0,t.__altered=!0,t):nr(a,c,h,f,y)}function cr(e){return e<t?0:e-1>>>5<<5}var hr,fr=function(t){function e(t){return null==t?lr():nt(t)?t:lr().withMutations((function(e){var r=S(t);Jt(r.size),r.forEach((function(t,r){return e.set(r,t)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("OrderedMap {","}")},e.prototype.get=function(t,e){var r=this._map.get(t);return void 0!==r?this._list.get(r)[1]:e},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this.__altered=!0,this):lr()},e.prototype.set=function(t,e){return _r(this,t,e)},e.prototype.remove=function(t){return _r(this,t,n)},e.prototype.__iterate=function(t,e){var r=this;return this._list.__iterate((function(e){return e&&t(e[1],e[0],r)}),e)},e.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),r=this._list.__ensureOwner(t);return t?pr(e,r,t,this.__hash):0===this.size?lr():(this.__ownerID=t,this.__altered=!1,this._map=e,this._list=r,this)},e}(xe);function pr(t,e,r,n){var i=Object.create(fr.prototype);return i.size=t?t.size:0,i._map=t,i._list=e,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function lr(){return hr||(hr=pr(Be(),ir()))}function _r(e,r,i){var o,s,u=e._map,a=e._list,c=u.get(r),h=void 0!==c;if(i===n){if(!h)return e;a.size>=t&&a.size>=2*u.size?(o=(s=a.filter((function(t,e){return void 0!==t&&c!==e}))).toKeyedSeq().map((function(t){return t[0]})).flip().toMap(),e.__ownerID&&(o.__ownerID=s.__ownerID=e.__ownerID)):(o=u.remove(r),s=c===a.size-1?a.pop():a.set(c,void 0))}else if(h){if(i===a.get(c)[1])return e;o=u,s=a.set(c,[r,i])}else o=u.set(r,a.size),s=a.set(a.size,[r,i]);return e.__ownerID?(e.size=o.size,e._map=o,e._list=s,e.__hash=void 0,e.__altered=!0,e):pr(o,s)}fr.isOrderedMap=nt,fr.prototype[A]=!0,fr.prototype.delete=fr.prototype.remove;var vr="@@__IMMUTABLE_STACK__@@";function yr(t){return Boolean(t&&t[vr])}var dr=function(t){function e(t){return null==t?br():yr(t)?t:br().pushAll(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("Stack [","]")},e.prototype.get=function(t,e){var r=this._head;for(t=u(this,t);r&&t--;)r=r.next;return r?r.value:e},e.prototype.peek=function(){return this._head&&this._head.value},e.prototype.push=function(){var t=arguments;if(0===arguments.length)return this;for(var e=this.size+arguments.length,r=this._head,n=arguments.length-1;n>=0;n--)r={value:t[n],next:r};return this.__ownerID?(this.size=e,this._head=r,this.__hash=void 0,this.__altered=!0,this):mr(e,r)},e.prototype.pushAll=function(e){if(0===(e=t(e)).size)return this;if(0===this.size&&yr(e))return e;Jt(e.size);var r=this.size,n=this._head;return e.__iterate((function(t){r++,n={value:t,next:n}}),!0),this.__ownerID?(this.size=r,this._head=n,this.__hash=void 0,this.__altered=!0,this):mr(r,n)},e.prototype.pop=function(){return this.slice(1)},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):br()},e.prototype.slice=function(e,r){if(c(e,r,this.size))return this;var n=h(e,this.size);if(f(r,this.size)!==this.size)return t.prototype.slice.call(this,e,r);for(var i=this.size-n,o=this._head;n--;)o=o.next;return this.__ownerID?(this.size=i,this._head=o,this.__hash=void 0,this.__altered=!0,this):mr(i,o)},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?mr(this.size,this._head,t,this.__hash):0===this.size?br():(this.__ownerID=t,this.__altered=!1,this)},e.prototype.__iterate=function(t,e){var r=this;if(e)return new Q(this.toArray()).__iterate((function(e,n){return t(e,n,r)}),e);for(var n=0,i=this._head;i&&!1!==t(i.value,n++,this);)i=i.next;return n},e.prototype.__iterator=function(t,e){if(e)return new Q(this.toArray()).__iterator(t,e);var r=0,n=this._head;return new T((function(){if(n){var e=n.value;return n=n.next,C(t,r++,e)}return{value:void 0,done:!0}}))},e}(z);dr.isStack=yr;var gr,wr=dr.prototype;function mr(t,e,r,n){var i=Object.create(wr);return i.size=t,i._head=e,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function br(){return gr||(gr=mr(0))}wr[vr]=!0,wr.shift=wr.pop,wr.unshift=wr.push,wr.unshiftAll=wr.pushAll,wr.withMutations=ze,wr.wasAltered=Oe,wr.asImmutable=qe,wr["@@transducer/init"]=wr.asMutable=Ie,wr["@@transducer/step"]=function(t,e){return t.unshift(e)},wr["@@transducer/result"]=function(t){return t.asImmutable()};var Sr="@@__IMMUTABLE_SET__@@";function zr(t){return Boolean(t&&t[Sr])}function Ir(t){return zr(t)&&k(t)}function qr(t,e){if(t===e)return!0;if(!v(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||d(t)!==d(e)||w(t)!==w(e)||k(t)!==k(e))return!1;if(0===t.size&&0===e.size)return!0;var r=!m(t);if(k(t)){var i=t.entries();return e.every((function(t,e){var n=i.next().value;return n&&ot(n[1],t)&&(r||ot(n[0],e))}))&&i.next().done}var o=!1;if(void 0===t.size)if(void 0===e.size)"function"==typeof t.cacheResult&&t.cacheResult();else{o=!0;var s=t;t=e,e=s}var u=!0,a=e.__iterate((function(e,i){if(r?!t.has(e):o?!ot(e,t.get(i,n)):!ot(t.get(i,n),e))return u=!1,!1}));return u&&t.size===a}function Or(t,e){var r=function(r){t.prototype[r]=e[r]};return Object.keys(e).forEach(r),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(r),t}function xr(t){if(!t||"object"!=typeof t)return t;if(!v(t)){if(!Xt(t))return t;t=N(t)}if(d(t)){var e={};return t.__iterate((function(t,r){e[r]=xr(t)})),e}var r=[];return t.__iterate((function(t){r.push(xr(t))})),r}var Mr=function(t){function e(e){return null==e?Dr():zr(e)&&!k(e)?e:Dr().withMutations((function(r){var n=t(e);Jt(n.size),n.forEach((function(t){return r.add(t)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(t){return this(S(t).keySeq())},e.intersect=function(t){return(t=b(t).toArray()).length?Ar.intersect.apply(e(t.pop()),t):Dr()},e.union=function(t){return(t=b(t).toArray()).length?Ar.union.apply(e(t.pop()),t):Dr()},e.prototype.toString=function(){return this.__toString("Set {","}")},e.prototype.has=function(t){return this._map.has(t)},e.prototype.add=function(t){return kr(this,this._map.set(t,t))},e.prototype.remove=function(t){return kr(this,this._map.remove(t))},e.prototype.clear=function(){return kr(this,this._map.clear())},e.prototype.map=function(t,e){var r=this,n=!1,i=kr(this,this._map.mapEntries((function(i){var o=i[1],s=t.call(e,o,o,r);return s!==o&&(n=!0),[s,s]}),e));return n?i:this},e.prototype.union=function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];return 0===(e=e.filter((function(t){return 0!==t.size}))).length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations((function(r){for(var n=0;n<e.length;n++)t(e[n]).forEach((function(t){return r.add(t)}))})):this.constructor(e[0])},e.prototype.intersect=function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];if(0===e.length)return this;e=e.map((function(e){return t(e)}));var n=[];return this.forEach((function(t){e.every((function(e){return e.includes(t)}))||n.push(t)})),this.withMutations((function(t){n.forEach((function(e){t.remove(e)}))}))},e.prototype.subtract=function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];if(0===e.length)return this;e=e.map((function(e){return t(e)}));var n=[];return this.forEach((function(t){e.some((function(e){return e.includes(t)}))&&n.push(t)})),this.withMutations((function(t){n.forEach((function(e){t.remove(e)}))}))},e.prototype.sort=function(t){return Xr(Rt(this,t))},e.prototype.sortBy=function(t,e){return Xr(Rt(this,e,t))},e.prototype.wasAltered=function(){return this._map.wasAltered()},e.prototype.__iterate=function(t,e){var r=this;return this._map.__iterate((function(e){return t(e,e,r)}),e)},e.prototype.__iterator=function(t,e){return this._map.__iterator(t,e)},e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):0===this.size?this.__empty():(this.__ownerID=t,this._map=e,this)},e}(I);Mr.isSet=zr;var Er,Ar=Mr.prototype;function kr(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function jr(t,e){var r=Object.create(Ar);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}function Dr(){return Er||(Er=jr(Be()))}Ar[Sr]=!0,Ar.delete=Ar.remove,Ar.merge=Ar.concat=Ar.union,Ar.withMutations=ze,Ar.asImmutable=qe,Ar["@@transducer/init"]=Ar.asMutable=Ie,Ar["@@transducer/step"]=function(t,e){return t.add(e)},Ar["@@transducer/result"]=function(t){return t.asImmutable()},Ar.__empty=Dr,Ar.__make=jr;var Tr,Cr=function(t){function e(t,r,n){if(!(this instanceof e))return new e(t,r,n);if(Qt(0!==n,"Cannot step a Range by 0"),t=t||0,void 0===r&&(r=1/0),n=void 0===n?1:Math.abs(n),r<t&&(n=-n),this._start=t,this._end=r,this._step=n,this.size=Math.max(0,Math.ceil((r-t)/n-1)+1),0===this.size){if(Tr)return Tr;Tr=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},e.prototype.get=function(t,e){return this.has(t)?this._start+u(this,t)*this._step:e},e.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},e.prototype.slice=function(t,r){return c(t,r,this.size)?this:(t=h(t,this.size),(r=f(r,this.size))<=t?new e(0,0):new e(this.get(t,this._end),this.get(r,this._end),this._step))},e.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step==0){var r=e/this._step;if(r>=0&&r<this.size)return r}return-1},e.prototype.lastIndexOf=function(t){return this.indexOf(t)},e.prototype.__iterate=function(t,e){for(var r=this.size,n=this._step,i=e?this._start+(r-1)*n:this._start,o=0;o!==r&&!1!==t(i,e?r-++o:o++,this);)i+=e?-n:n;return o},e.prototype.__iterator=function(t,e){var r=this.size,n=this._step,i=e?this._start+(r-1)*n:this._start,o=0;return new T((function(){if(o===r)return{value:void 0,done:!0};var s=i;return i+=e?-n:n,C(t,e?r-++o:o++,s)}))},e.prototype.equals=function(t){return t instanceof e?this._start===t._start&&this._end===t._end&&this._step===t._step:qr(this,t)},e}(V);function Rr(t,e,r){for(var i=Yt(e),o=0;o!==i.length;)if((t=ee(t,i[o++],n))===n)return r;return t}function Lr(t,e){return Rr(this,t,e)}function Pr(t,e){return Rr(t,e,n)!==n}function Br(){Jt(this.size);var t={};return this.__iterate((function(e,r){t[r]=e})),t}b.isIterable=v,b.isKeyed=d,b.isIndexed=w,b.isAssociative=m,b.isOrdered=k,b.Iterator=T,Or(b,{toArray:function(){Jt(this.size);var t=new Array(this.size||0),e=d(this),r=0;return this.__iterate((function(n,i){t[r++]=e?[i,n]:n})),t},toIndexedSeq:function(){return new qt(this)},toJS:function(){return xr(this)},toKeyedSeq:function(){return new It(this,!0)},toMap:function(){return xe(this.toKeyedSeq())},toObject:Br,toOrderedMap:function(){return fr(this.toKeyedSeq())},toOrderedSet:function(){return Xr(d(this)?this.valueSeq():this)},toSet:function(){return Mr(d(this)?this.valueSeq():this)},toSetSeq:function(){return new Ot(this)},toSeq:function(){return w(this)?this.toIndexedSeq():d(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return dr(d(this)?this.valueSeq():this)},toList:function(){return $e(d(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Ut(this,Tt(this,t))},includes:function(t){return this.some((function(e){return ot(e,t)}))},entries:function(){return this.__iterator(2)},every:function(t,e){Jt(this.size);var r=!0;return this.__iterate((function(n,i,o){if(!t.call(e,n,i,o))return r=!1,!1})),r},filter:function(t,e){return Ut(this,kt(this,t,e,!0))},find:function(t,e,r){var n=this.findEntry(t,e);return n?n[1]:r},forEach:function(t,e){return Jt(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){Jt(this.size),t=void 0!==t?""+t:",";var e="",r=!0;return this.__iterate((function(n){r?r=!1:e+=t,e+=null!=n?n.toString():""})),e},keys:function(){return this.__iterator(0)},map:function(t,e){return Ut(this,Et(this,t,e))},reduce:function(t,e,r){return Hr(this,t,e,r,arguments.length<2,!1)},reduceRight:function(t,e,r){return Hr(this,t,e,r,arguments.length<2,!0)},reverse:function(){return Ut(this,At(this,!0))},slice:function(t,e){return Ut(this,jt(this,t,e,!0))},some:function(t,e){return!this.every(Qr(t),e)},sort:function(t){return Ut(this,Rt(this,t))},values:function(){return this.__iterator(1)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some((function(){return!0}))},count:function(t,e){return s(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return function(t,e,r){var n=xe().asMutable();return t.__iterate((function(i,o){n.update(e.call(r,i,o,t),0,(function(t){return t+1}))})),n.asImmutable()}(this,t,e)},equals:function(t){return qr(this,t)},entrySeq:function(){var t=this;if(t._cache)return new Q(t._cache);var e=t.toSeq().map(Fr).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(Qr(t),e)},findEntry:function(t,e,r){var n=r;return this.__iterate((function(r,i,o){if(t.call(e,r,i,o))return n=[i,r],!1})),n},findKey:function(t,e){var r=this.findEntry(t,e);return r&&r[0]},findLast:function(t,e,r){return this.toKeyedSeq().reverse().find(t,e,r)},findLastEntry:function(t,e,r){return this.toKeyedSeq().reverse().findEntry(t,e,r)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(t){return this.find(a,null,t)},flatMap:function(t,e){return Ut(this,function(t,e,r){var n=Kt(t);return t.toSeq().map((function(i,o){return n(e.call(r,i,o,t))})).flatten(!0)}(this,t,e))},flatten:function(t){return Ut(this,Ct(this,t,!0))},fromEntrySeq:function(){return new xt(this)},get:function(t,e){return this.find((function(e,r){return ot(r,t)}),void 0,e)},getIn:Lr,groupBy:function(t,e){return function(t,e,r){var n=d(t),i=(k(t)?fr():xe()).asMutable();t.__iterate((function(o,s){i.update(e.call(r,o,s,t),(function(t){return(t=t||[]).push(n?[s,o]:o),t}))}));var o=Kt(t);return i.map((function(e){return Ut(t,o(e))})).asImmutable()}(this,t,e)},has:function(t){return this.get(t,n)!==n},hasIn:function(t){return Pr(this,t)},isSubset:function(t){return t="function"==typeof t.includes?t:b(t),this.every((function(e){return t.includes(e)}))},isSuperset:function(t){return(t="function"==typeof t.isSubset?t:b(t)).isSubset(this)},keyOf:function(t){return this.findKey((function(e){return ot(e,t)}))},keySeq:function(){return this.toSeq().map(Vr).toIndexedSeq()},last:function(t){return this.toSeq().reverse().first(t)},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return Lt(this,t)},maxBy:function(t,e){return Lt(this,e,t)},min:function(t){return Lt(this,t?Jr(t):Zr)},minBy:function(t,e){return Lt(this,e?Jr(e):Zr,t)},rest:function(){return this.slice(1)},skip:function(t){return 0===t?this:this.slice(Math.max(0,t))},skipLast:function(t){return 0===t?this:this.slice(0,-Math.max(0,t))},skipWhile:function(t,e){return Ut(this,Dt(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(Qr(t),e)},sortBy:function(t,e){return Ut(this,Rt(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return this.slice(-Math.max(0,t))},takeWhile:function(t,e){return Ut(this,function(t,e,r){var n=Nt(t);return n.__iterateUncached=function(n,i){var o=this;if(i)return this.cacheResult().__iterate(n,i);var s=0;return t.__iterate((function(t,i,u){return e.call(r,t,i,u)&&++s&&n(t,i,o)})),s},n.__iteratorUncached=function(n,i){var o=this;if(i)return this.cacheResult().__iterator(n,i);var s=t.__iterator(2,i),u=!0;return new T((function(){if(!u)return{value:void 0,done:!0};var t=s.next();if(t.done)return t;var i=t.value,a=i[0],c=i[1];return e.call(r,c,a,o)?2===n?t:C(n,a,c,t):(u=!1,{value:void 0,done:!0})}))},n}(this,t,e))},takeUntil:function(t,e){return this.takeWhile(Qr(t),e)},update:function(t){return t(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(t){if(t.size===1/0)return 0;var e=k(t),r=d(t),n=e?1:0;return function(t,e){return e=st(e,3432918353),e=st(e<<15|e>>>-15,461845907),e=st(e<<13|e>>>-13,5),e=st((e=(e+3864292196|0)^t)^e>>>16,2246822507),ut((e=st(e^e>>>13,3266489909))^e>>>16)}(t.__iterate(r?e?function(t,e){n=31*n+$r(ct(t),ct(e))|0}:function(t,e){n=n+$r(ct(t),ct(e))|0}:e?function(t){n=31*n+ct(t)|0}:function(t){n=n+ct(t)|0}),n)}(this))}});var Ur=b.prototype;Ur[_]=!0,Ur[D]=Ur.values,Ur.toJSON=Ur.toArray,Ur.__toStringMapper=Gt,Ur.inspect=Ur.toSource=function(){return this.toString()},Ur.chain=Ur.flatMap,Ur.contains=Ur.includes,Or(S,{flip:function(){return Ut(this,Mt(this))},mapEntries:function(t,e){var r=this,n=0;return Ut(this,this.toSeq().map((function(i,o){return t.call(e,[o,i],n++,r)})).fromEntrySeq())},mapKeys:function(t,e){var r=this;return Ut(this,this.toSeq().flip().map((function(n,i){return t.call(e,n,i,r)})).flip())}});var Wr=S.prototype;Wr[y]=!0,Wr[D]=Ur.entries,Wr.toJSON=Br,Wr.__toStringMapper=function(t,e){return Gt(e)+": "+Gt(t)},Or(z,{toKeyedSeq:function(){return new It(this,!1)},filter:function(t,e){return Ut(this,kt(this,t,e,!1))},findIndex:function(t,e){var r=this.findEntry(t,e);return r?r[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return Ut(this,At(this,!1))},slice:function(t,e){return Ut(this,jt(this,t,e,!1))},splice:function(t,e){var r=arguments.length;if(e=Math.max(e||0,0),0===r||2===r&&!e)return this;t=h(t,t<0?this.count():this.size);var n=this.slice(0,t);return Ut(this,1===r?n:n.concat(Ft(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var r=this.findLastEntry(t,e);return r?r[0]:-1},first:function(t){return this.get(0,t)},flatten:function(t){return Ut(this,Ct(this,t,!1))},get:function(t,e){return(t=u(this,t))<0||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find((function(e,r){return r===t}),void 0,e)},has:function(t){return(t=u(this,t))>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return Ut(this,function(t,e){var r=Nt(t);return r.size=t.size&&2*t.size-1,r.__iterateUncached=function(r,n){var i=this,o=0;return t.__iterate((function(t){return(!o||!1!==r(e,o++,i))&&!1!==r(t,o++,i)}),n),o},r.__iteratorUncached=function(r,n){var i,o=t.__iterator(1,n),s=0;return new T((function(){return(!i||s%2)&&(i=o.next()).done?i:s%2?C(r,s++,e):C(r,s++,i.value,i)}))},r}(this,t))},interleave:function(){var t=[this].concat(Ft(arguments)),e=Bt(this.toSeq(),V.of,t),r=e.flatten(!0);return e.size&&(r.size=e.size*t.length),Ut(this,r)},keySeq:function(){return Cr(0,this.size)},last:function(t){return this.get(-1,t)},skipWhile:function(t,e){return Ut(this,Dt(this,t,e,!1))},zip:function(){var t=[this].concat(Ft(arguments));return Ut(this,Bt(this,Yr,t))},zipAll:function(){var t=[this].concat(Ft(arguments));return Ut(this,Bt(this,Yr,t,!0))},zipWith:function(t){var e=Ft(arguments);return e[0]=this,Ut(this,Bt(this,t,e))}});var Kr=z.prototype;Kr[g]=!0,Kr[A]=!0,Or(I,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}});var Nr=I.prototype;function Hr(t,e,r,n,i,o){return Jt(t.size),t.__iterate((function(t,o,s){i?(i=!1,r=t):r=e.call(n,r,t,o,s)}),o),r}function Vr(t,e){return e}function Fr(t,e){return[e,t]}function Qr(t){return function(){return!t.apply(this,arguments)}}function Jr(t){return function(){return-t.apply(this,arguments)}}function Yr(){return Ft(arguments)}function Zr(t,e){return t<e?1:t>e?-1:0}function $r(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}Nr.has=Ur.includes,Nr.contains=Nr.includes,Nr.keys=Nr.values,Or(H,Wr),Or(V,Kr),Or(F,Nr);var Xr=function(t){function e(t){return null==t?rn():Ir(t)?t:rn().withMutations((function(e){var r=I(t);Jt(r.size),r.forEach((function(t){return e.add(t)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(t){return this(S(t).keySeq())},e.prototype.toString=function(){return this.__toString("OrderedSet {","}")},e}(Mr);Xr.isOrderedSet=Ir;var Gr,tn=Xr.prototype;function en(t,e){var r=Object.create(tn);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}function rn(){return Gr||(Gr=en(lr()))}tn[A]=!0,tn.zip=Kr.zip,tn.zipWith=Kr.zipWith,tn.zipAll=Kr.zipAll,tn.__empty=rn,tn.__make=en;var nn=function(t,e){var r;!function(t){if(M(t))throw new Error("Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.");if(E(t))throw new Error("Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.");if(null===t||"object"!=typeof t)throw new Error("Can not call `Record` with a non-object as default values. Use a plain javascript object instead.")}(t);var n=function(o){var s=this;if(o instanceof n)return o;if(!(this instanceof n))return new n(o);if(!r){r=!0;var u=Object.keys(t),a=i._indices={};i._name=e,i._keys=u,i._defaultValues=t;for(var c=0;c<u.length;c++){var h=u[c];a[h]=c,i[h]?"object"==typeof console&&console.warn&&console.warn("Cannot define "+un(this)+' with property "'+h+'" since that property name is part of the Record API.'):cn(i,h)}}return this.__ownerID=void 0,this._values=$e().withMutations((function(t){t.setSize(s._keys.length),S(o).forEach((function(e,r){t.set(s._indices[r],e===s._defaultValues[r]?void 0:e)}))})),this},i=n.prototype=Object.create(on);return i.constructor=n,e&&(n.displayName=e),n};nn.prototype.toString=function(){for(var t,e=un(this)+" { ",r=this._keys,n=0,i=r.length;n!==i;n++)e+=(n?", ":"")+(t=r[n])+": "+Gt(this.get(t));return e+" }"},nn.prototype.equals=function(t){return this===t||M(t)&&an(this).equals(an(t))},nn.prototype.hashCode=function(){return an(this).hashCode()},nn.prototype.has=function(t){return this._indices.hasOwnProperty(t)},nn.prototype.get=function(t,e){if(!this.has(t))return e;var r=this._indices[t],n=this._values.get(r);return void 0===n?this._defaultValues[t]:n},nn.prototype.set=function(t,e){if(this.has(t)){var r=this._values.set(this._indices[t],e===this._defaultValues[t]?void 0:e);if(r!==this._values&&!this.__ownerID)return sn(this,r)}return this},nn.prototype.remove=function(t){return this.set(t)},nn.prototype.clear=function(){var t=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:sn(this,t)},nn.prototype.wasAltered=function(){return this._values.wasAltered()},nn.prototype.toSeq=function(){return an(this)},nn.prototype.toJS=function(){return xr(this)},nn.prototype.entries=function(){return this.__iterator(2)},nn.prototype.__iterator=function(t,e){return an(this).__iterator(t,e)},nn.prototype.__iterate=function(t,e){return an(this).__iterate(t,e)},nn.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._values.__ensureOwner(t);return t?sn(this,e,t):(this.__ownerID=t,this._values=e,this)},nn.isRecord=M,nn.getDescriptiveName=un;var on=nn.prototype;function sn(t,e,r){var n=Object.create(Object.getPrototypeOf(t));return n._values=e,n.__ownerID=r,n}function un(t){return t.constructor.displayName||t.constructor.name||"Record"}function an(t){return X(t._keys.map((function(e){return[e,t.get(e)]})))}function cn(t,e){try{Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){Qt(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}catch(t){}}on[x]=!0,on.delete=on.remove,on.deleteIn=on.removeIn=he,on.getIn=Lr,on.hasIn=Ur.hasIn,on.merge=_e,on.mergeWith=ve,on.mergeIn=be,on.mergeDeep=we,on.mergeDeepWith=me,on.mergeDeepIn=Se,on.setIn=ae,on.update=pe,on.updateIn=le,on.withMutations=ze,on.asMutable=Ie,on.asImmutable=qe,on[D]=on.entries,on.toJSON=on.toObject=Ur.toObject,on.inspect=on.toSource=function(){return this.toString()};var hn,fn=function(t){function e(t,r){if(!(this instanceof e))return new e(t,r);if(this._value=t,this.size=void 0===r?1/0:Math.max(0,r),0===this.size){if(hn)return hn;hn=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},e.prototype.get=function(t,e){return this.has(t)?this._value:e},e.prototype.includes=function(t){return ot(this._value,t)},e.prototype.slice=function(t,r){var n=this.size;return c(t,r,n)?this:new e(this._value,f(r,n)-h(t,n))},e.prototype.reverse=function(){return this},e.prototype.indexOf=function(t){return ot(this._value,t)?0:-1},e.prototype.lastIndexOf=function(t){return ot(this._value,t)?this.size:-1},e.prototype.__iterate=function(t,e){for(var r=this.size,n=0;n!==r&&!1!==t(this._value,e?r-++n:n++,this););return n},e.prototype.__iterator=function(t,e){var r=this,n=this.size,i=0;return new T((function(){return i===n?{value:void 0,done:!0}:C(t,e?n-++i:i++,r._value)}))},e.prototype.equals=function(t){return t instanceof e?ot(this._value,t._value):qr(t)},e}(V);function pn(t,e,r,n,i,o){if("string"!=typeof r&&!E(r)&&(K(r)||L(r)||$t(r))){if(~t.indexOf(r))throw new TypeError("Cannot convert circular structure to Immutable");t.push(r),i&&""!==n&&i.push(n);var s=e.call(o,n,N(r).map((function(n,o){return pn(t,e,n,o,i,r)})),i&&i.slice());return t.pop(),i&&i.pop(),s}return r}function ln(t,e){return w(e)?e.toList():d(e)?e.toMap():e.toSet()}const _n={version:"4.1.0",Collection:b,Iterable:b,Seq:N,Map:xe,OrderedMap:fr,List:$e,Stack:dr,Set:Mr,OrderedSet:Xr,Record:nn,Range:Cr,Repeat:fn,is:ot,fromJS:function(t,e){return pn([],e||ln,t,"",e&&e.length>2?[]:void 0,{"":t})},hash:ct,isImmutable:E,isCollection:v,isKeyed:d,isIndexed:w,isAssociative:m,isOrdered:k,isValueObject:it,isPlainObject:$t,isSeq:O,isList:Ze,isMap:rt,isOrderedMap:nt,isStack:yr,isSet:zr,isOrderedSet:Ir,isRecord:M,get:ee,getIn:Rr,has:te,hasIn:Pr,merge:function(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return ge(t,e)},mergeDeep:function(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return de(t,e)},mergeWith:function(t,e){for(var r=[],n=arguments.length-2;n-- >0;)r[n]=arguments[n+2];return ge(e,r,t)},mergeDeepWith:function(t,e){for(var r=[],n=arguments.length-2;n-- >0;)r[n]=arguments[n+2];return de(e,r,t)},remove:ne,removeIn:ce,set:ie,setIn:ue,update:fe,updateIn:oe};class vn extends(_n.Record({x:0,y:0})){add(t){return new vn({x:this.x+t.x,y:this.y+t.y})}subtract(t){return new yn({x:this.x-t.x,y:this.y-t.y})}}class yn extends(_n.Record({x:0,y:0})){add(t){return new yn({x:this.x+t.x,y:this.y+t.y})}scale(t){return new yn({x:t*this.x,y:t*this.y})}}function dn(t){const e=new Float32Array(2*t.length);for(let r=0;r<t.length;r++)e[2*r]=t[r].x,e[2*r+1]=t[r].y;return e}function gn(t,e){return t.add(e.subtract(t).scale(.5))}class wn extends(_n.Record({q:0,r:0,s:0})){add(t){return new wn({q:this.q+t.q,r:this.r+t.r,s:this.s+t.s})}subtract(t){return new mn({q:this.q-t.q,r:this.r-t.r,s:this.s-t.s})}}class mn extends(_n.Record({q:0,r:0,s:0})){add(t){return new mn({q:this.q+t.q,r:this.r+t.r,s:this.s+t.s})}scale(t){return new mn({q:t*this.q,r:t*this.r,s:t*this.s})}rotateRight(){return new mn({q:-this.r,r:-this.s,s:-this.q})}rotateLeft(){return new mn({q:-this.s,r:-this.q,s:-this.r})}}const bn=_n.List(function*(){let t=new mn({q:1,r:0,s:-1});for(let e=0;e<6;e++)yield t,t=t.rotateRight()}());function*Sn(t,e){let r=t.add(bn.get(4).scale(e));for(let t=0;t<6;t++)for(let n=0;n<e;n++)yield r,r=r.add(bn.get(t))}function zn(t){return(t+3)%6}function In(t,e,r){const n=t.createShader(e);return t.shaderSource(n,r.replace(/^\s+|\s+$/g,"")),t.compileShader(n),n}class qn{constructor(t=[]){this.map=new Map(t)}decrease(t){if(!this.map.has(t))throw new Error(`No count for key "${t}"`);const e=this.map.get(t)-1;return this.map.set(t,e),e}get(t){return this.map.get(t)}}function On(t){return t.reduce(((t,e)=>t+e),0)}function xn(t,e,r){if(t.has(e))return t.get(e);const n=r();return t.set(e,n),n}var Mn,En=r(307),An=r.n(En);class kn extends Error{}class jn{constructor({entropyNoise:t,initialWeightSum:e,initialWeightLogWeightSum:r,initialAllowedTiles:n,initialEnablers:i}){this.tile=void 0,this.entropyNoise=t,this.weightSum=e,this.weightLogWeightSum=r,this.allowedTiles=new Set(n),this.enablers=new Map(Array.from(i).map((([t,e])=>[t,new qn(e)])))}get entropy(){return Math.log2(this.weightSum)-this.weightLogWeightSum/this.weightSum+this.entropyNoise}get isCollapsed(){return void 0!==this.tile}getTile(){if(void 0===this.tile)throw new kn("Cell has not been collapsed.");return this.tile}getWeightSum(){return this.weightSum}getAllowedTiles(){return this.allowedTiles}getEnablerCounter(t){return this.enablers.get(t)}isTileAllowed(t){return this.allowedTiles.has(t)}disallowTile(t){this.allowedTiles.delete(t),this.weightSum-=t.weight,this.weightLogWeightSum-=t.weightLogWeight}*collapse(t){if(void 0!==this.tile)throw new kn("Cell already collapsed.");this.tile=t;for(const e of this.allowedTiles)e!==t&&(yield e)}}class Dn{constructor(t,e){this.id=t,this.weight=e,this.weightLogWeight=this.weight*Math.log2(this.weight)}toString(){return`[Tile ${this.id}]`}}class Tn{constructor(t){const e=Array.from(t);this.map=new Map(e.map((t=>[t.id,t]))),this.weightSum=On(e.map((t=>t.weight))),this.weightLogWeightSum=On(e.map((t=>t.weightLogWeight)))}get(t){return this.map.get(t)}[Symbol.iterator](){return this.map.values()}}class Cn{constructor(){this.compatibleTiles=new Map}withCompatibleTile(t,e,r){const n=xn(this.compatibleTiles,t,(()=>new Map));return xn(n,r,(()=>[])).push(e),this}withRule(t,e,r){return this.withCompatibleTile(t,e,r),this.withCompatibleTile(e,t,zn(r)),this}build(){return new Rn(this.compatibleTiles)}}class Rn{constructor(t){this.compatibleTiles=new Map(Array.from(t).map((([t,e])=>[t,new Map(e)]))),this.enablerCounts=new Map;for(const[t,e]of this.compatibleTiles)for(const[r,n]of e)xn(this.enablerCounts,t,(()=>new Map)).set(r,n.length)}getCompatibleTiles(t){return this.compatibleTiles.get(t).entries()}}!function(t){t.Lines={getID:t=>t.LINES},t.Points={getID:t=>t.POINTS}}(Mn||(Mn={}));class Ln{constructor(t,e){this.vertices=t,this.primitiveType=e}bake(t){const e=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,dn(this.vertices),t.STATIC_DRAW),{buffer:e,numVertices:this.vertices.length,mode:this.primitiveType.getID(t)}}}class Pn extends(_n.Record({a:new vn,b:new vn,c:new vn,d:new vn})){divide(){const t=gn(this.a,this.b),e=gn(this.c,this.d),r=gn(this.b,this.c),n=gn(t,r),i=gn(e,r),o=gn(n,i);return[new Pn({a:this.a,b:t,c:n,d:o}),new Pn({a:o,b:i,c:e,d:this.b})]}sample(t){let e=_n.Seq([this]);for(let r=0;r<t;r++)e=e.flatMap((t=>t.divide()));return e.map((t=>[t.a,t.d]))}}class Bn{constructor(t,e,r){this.id=t,this.connections=e,this.connectionList=_n.List(bn.keySeq().filter((t=>this.hasConnection(t)))),this.weight=r}hasConnection(t){return 1==(this.connections>>bn.size-t-1&1)}generateTile(){return new Dn(this.id,this.weight)}generatePart(t){const e=[],r=t.transformPosition(new wn({q:0,r:0,s:0}));for(let n=0;n<bn.size;n++)this.hasConnection(n)&&e.push(r.add(t.transformVector(bn.get(n)).scale(.5)),r);return new Ln(e,Mn.Lines)}generateCurves(t){const e=t.transformPosition(new wn({q:0,r:0,s:0}));function r(r){return e.add(t.transformVector(bn.get(r).scale(.5)))}if(2===this.connectionList.size){const[t,n]=this.connectionList;return _n.List.of(new Pn({a:r(t),b:e,c:e,d:r(n)}))}return this.connectionList.map((t=>new Pn({a:r(t),b:e,c:e,d:e})))}}class Un{constructor(t){this.piecesWithConnection=new Map,this.piecesWithoutConnection=new Map,this.map=new Map(Array.from(t).map((t=>[t.id,t])));for(const t of this)for(let e=0;e<bn.size;e++)xn(t.hasConnection(e)?this.piecesWithConnection:this.piecesWithoutConnection,e,(()=>[])).push(t)}generateTileSet(){return new Tn(Array.from(this).map((t=>t.generateTile())))}generateAdjacencyRules(){const t=new Cn;for(const e of this)for(let r=0;r<bn.size;r++){const n=zn(r),i=e.hasConnection(r)?this.piecesWithConnection:this.piecesWithoutConnection;for(const o of i.get(n))t.withCompatibleTile(e.id,o.id,r)}return t.build()}generateParts(t){return new Map(Array.from(this).map((e=>[e.id,e.generatePart(t)])))}generateCurves(t){return new Map(Array.from(this).map((e=>[e.id,e.generateCurves(t)])))}createBorderConstraint(){return t=>t.map((e=>{const r=[];for(let n=0;n<bn.size;n++){const i=e.add(bn.get(n));t.has(i)||r.push(...this.piecesWithConnection.get(n))}return[e,r.map((t=>t.id))]}))}[Symbol.iterator](){return this.map.values()}}const Wn=r(97),Kn=r(0);class Nn{constructor({canvas:t,parts:e}){this.gl=t.getContext("webgl2"),this.gl.viewport(0,0,t.width,t.height),this.gl.clearColor(0,0,0,1),this.bakedParts=new Map(Array.from(e).map((([t,e])=>[t,e.bake(this.gl)])));const r=In(this.gl,this.gl.VERTEX_SHADER,Kn),n=In(this.gl,this.gl.FRAGMENT_SHADER,Wn),i=function(t,...e){const r=t.createProgram();for(const n of e)t.attachShader(r,n);return t.linkProgram(r),r}(this.gl,r,n);this.gl.useProgram(i),this.translateLocation=this.gl.getUniformLocation(i,"uTranslate"),this.positionLocation=this.gl.getAttribLocation(i,"aPosition"),this.gl.enableVertexAttribArray(this.positionLocation)}startDraw(){this.gl.clear(this.gl.COLOR_BUFFER_BIT)}drawPart(t,e){this.gl.uniform2fv(this.translateLocation,dn([e]));const{buffer:r,numVertices:n,mode:i}=this.bakedParts.get(t);this.gl.bindBuffer(this.gl.ARRAY_BUFFER,r),this.gl.vertexAttribPointer(this.positionLocation,2,this.gl.FLOAT,!1,0,0),this.gl.drawArrays(i,0,n)}}var Hn=r(379),Vn=r.n(Hn),Fn=r(795),Qn=r.n(Fn),Jn=r(569),Yn=r.n(Jn),Zn=r(565),$n=r.n(Zn),Xn=r(216),Gn=r.n(Xn),ti=r(589),ei=r.n(ti),ri=r(192),ni={};ni.styleTagTransform=ei(),ni.setAttributes=$n(),ni.insert=Yn().bind(null,"head"),ni.domAPI=Qn(),ni.insertStyleElement=Gn(),Vn()(ri.Z,ni),ri.Z&&ri.Z.locals&&ri.Z.locals;const ii=new Un([new Bn(0,48,2),new Bn(1,40,2),new Bn(2,36,2),new Bn(3,34,2),new Bn(4,33,2),new Bn(5,24,2),new Bn(6,20,2),new Bn(7,18,2),new Bn(8,17,2),new Bn(9,12,2),new Bn(10,10,2),new Bn(11,9,2),new Bn(12,6,2),new Bn(13,5,2),new Bn(14,3,2),new Bn(15,32,.001),new Bn(16,16,.001),new Bn(17,8,.001),new Bn(18,4,.001),new Bn(19,2,.001),new Bn(20,1,.001),new Bn(21,0,.001)]),oi=function*(t,e){yield t;for(let e=0;e<6;e++)yield*Sn(t,e+1)}(new wn({q:0,r:0,s:0})),si=new class{constructor(t=new yn({x:Math.sqrt(3),y:0}),e=new yn({x:Math.sqrt(3)/2,y:1.5}),r=new vn({x:0,y:0})){this.qBasis=t,this.rBasis=e,this.origin=r}transformPosition(t){return this.origin.add(this.qBasis.scale(t.q)).add(this.rBasis.scale(t.r))}transformVector(t){return this.qBasis.scale(t.q).add(this.rBasis.scale(t.r))}}(new yn({x:.06*Math.sqrt(3),y:0}),new yn({x:.06*Math.sqrt(3)/2,y:-.09}),new vn({x:0,y:0})),ui=ii.generateParts(si),ai=new class{constructor(t){this.constraints=[],this.entropyHeap=new(An())({comparator:([,t],[,e])=>t-e}),this.disallowStack=[],this.heat=1,this.tiles=t.tiles,this.rules=t.rules,t.constraints&&(this.constraints=Array.from(t.constraints)),t.heat&&(this.heat=t.heat);const e=()=>new jn({entropyNoise:t.noiseFunction(),initialWeightSum:this.tiles.weightSum,initialWeightLogWeightSum:this.tiles.weightLogWeightSum,initialAllowedTiles:this.tiles,initialEnablers:this.rules.enablerCounts});this.cells=_n.Map(_n.Seq(t.space).map((t=>[t,e()]))),this.cells.forEach(((t,e)=>{this.entropyHeap.queue([e,t.entropy])}))}applyConstraints(){const t=_n.Set(this.cells.keys());for(const e of this.constraints)for(const[r,n]of e(t)){if(!this.cells.has(r))throw new kn(`Cell at ${r} does not exist.`);const t=this.cells.get(r);let e=!1;for(const i of n){const n=this.tiles.get(i);t.isTileAllowed(n)&&(t.disallowTile(n),this.disallowStack.push([r,n]),e=!0)}e&&(this.entropyHeap.queue([r,t.entropy]),this.propogate())}}run(){this.applyConstraints();let t=[];for(;;){const e=this.selectCell();if(void 0===e)break;this.collapseCellAt(e),this.propogate(),t.push(e)}return{tiles:this.cells.map((t=>t.getTile())),history:t}}selectCell(){for(;this.entropyHeap.length>0;){const[t]=this.entropyHeap.dequeue();if(!this.cells.get(t).isCollapsed)return t}}collapseCellAt(t){const e=this.cells.get(t);if(0===e.getAllowedTiles().size)throw new kn(`Cell at ${t} has no possible tiles!`);const r=this.selectTile(e.getAllowedTiles(),e.getWeightSum());for(const n of e.collapse(r))this.disallowStack.push([t,n])}propogate(){for(;this.disallowStack.length>0;){const[t,e]=this.disallowStack.pop();for(const[r,n]of this.rules.getCompatibleTiles(e.id)){const e=t.add(bn.get(r)),i=this.cells.get(e);if(void 0===i||i.isCollapsed)continue;const o=zn(r);for(const t of n){const r=this.tiles.get(t);i.isTileAllowed(r)&&(0===i.getEnablerCounter(t).decrease(o)&&(i.disallowTile(r),this.entropyHeap.queue([e,i.entropy]),this.disallowStack.push([e,r])))}}}}selectTile(t,e){let r=Math.random()*e;for(const e of t){if(r<e.weight)return e;r-=e.weight}}}({space:oi,tiles:ii.generateTileSet(),rules:ii.generateAdjacencyRules(),constraints:[ii.createBorderConstraint()],noiseFunction:()=>0*Math.random()});window.onload=()=>{const{tiles:t}=ai.run(),e=document.querySelector("#canvas"),r=new Nn({canvas:e,parts:ui});r.startDraw();for(const[e,n]of t)r.drawPart(n.id,si.transformPosition(e))}})()})();